# 퍼미션 [Permission](https://velog.io/@changhee09/%EC%95%88%EB%93%9C%EB%A1%9C%EC%9D%B4%EB%93%9C-%ED%8D%BC%EB%AF%B8%EC%85%98Permission)
- 퍼미션이란, 자신의 앱을 외부에서 이용할 때 권한을 부여하여 해당 권한을 가지고 들어올 때만 실행되게 하기 위한 설정입니다. 
- <permission>으로 선언된 앱을 이용하는 앱이 <uses-permission>을 선언하지 않으면 실행 시 에러가 발생합니다.

### 시스템 퍼미션
- 시스템에서 선언한 퍼미션도 있다. 
- 특정 기능을 시스템에서 보호하고 있어서 앱에서 그 기능을 이용할 때 <uses-permission>을 선언하지 않으면 에러가 발생한다.
    - ex. ACCESS_FINE_LOCATION(정확한 위치 정보 액세스), RECORD_AUDIO(오디오 녹음)

### 시스템 퍼미션 보호 이유
- 안드로이드 보안 아키텍쳐의 핵심은 앱들이 다른 앱이나 OS, 사용자에게 불리한 영향을 미칠만한 퍼미션을 갖고 있지 않는것이다.
- 안드로이드는 보안과 관련된 사용자 경험을 복잡하게 만들지 않기 위해서, 런타임에 동적으로 퍼미션을 관리하지는 않습니다.
    - 앱을 설치할 때 한번 사용자에게 모든 동의를 받고, 앱을 실행하는 도중에는 퍼미션과 관련된 절차를 거지치 않는다는 뜻

### 왜 사용자 경험이 복잡해 질수도 있나?
- 안드로이드 앱은 각각의 프로세스 샌드박스에서 구동되기 때문에, 앱끼리 리소스나 데이터를 공유하려면 명시적으로 해야함
    - 기본적으로는 사용할 수 없지만 퍼미션을 선언함으로써 사용할 수 있다는 의미
- 앱들은 필요한 퍼미션들을 매니페스트 파일에 선언해야 하고, 안드로이드 시스템은 앱이 설치되기 직전에 사용자에게 퍼미션 목록을 보여줌으로써 동의를 구해야 한다.

### 퍼미션 확인 및 다이얼로그를 통한 퍼미션 요청 코드
- checkSelfPermission(Context context, String permission) 
    - <U>퍼미션의 상태를 확인하는 함수</U>로 두 번째 매개변수가 퍼미션의 이름이며, 함수의 반환값은 **PERMISSION_GRANTED(퍼미션 부여)**, **PERMISSION_DENIED(퍼미션 부여되지 않은 상태)**입니다.
- requestPermissions(Activity activity, String[] permissions, int requestCode) 
    - <U>퍼미션 허용 여부를 묻는 다이얼로그가 뜨는 함수<U>로 사용자가 이 다이얼로그를 통해 거부 혹은 허용을 선택합니다. 두 번째 매개변수는 요청하고자 하는 퍼미션의 배열이고, 세 번째 매개변수는 상태코드 값으로 퍼미션 조정 결과를 확인할 때 이용합니다.
- onRequestPermissionResult(int requestCode, String[] permissions, int[] grantResults) 
    - <U>위의 다이얼로그가 닫히면 자동으로 호출되는 함수</U>로 이 함수에서 사용자의 퍼미션 조정 결과를 확인할 수 있습니다. 첫 번째 매개변수로 requestPermissions에서 사용한 상태코드 값이 넘어오고, 두 번째 매개변수는 요청한 퍼미션 이름, 세 번째 매개변수는 사용자가 조정한 결과값입니다.

### 참고
- (@changhee09_안드로이드 퍼미션)[https://velog.io/@changhee09/%EC%95%88%EB%93%9C%EB%A1%9C%EC%9D%B4%EB%93%9C-%ED%8D%BC%EB%AF%B8%EC%85%98Permission]