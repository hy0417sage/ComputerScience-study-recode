# CPU 성능 향상 기법

## CPU 성능을 높이는 방법 : <u>클럭</u>
- CPU 속도의 단위로 헤르츠(Hz) 단위로 측정한다.
- 클럭 속도가 높은 CPU는 빠르게 동작한다.
- 오버클럭킹 :최대 클럭 속도를 강제로 더 끌어올리는 기법

## CPU 성능을 높이는 방법 : <u>코어와 멀티코어</u>
- 코어 : 명령어를 실행하는 부품
- CPU : 명령어를 실행하는 부품을 여러개 포함하는 부품
- 멀티 코어 CPU, 멀티코어 프로세서 : 코어를 여러 개 포함하고 있는 CPU
- CPU의 코어와 스레드의 수를 늘려 CPU 성능을 높일 수 있다.
- 하지만, CPU의 연산 속도가 코어 수에 비례하여 증가하지는 않음
- 코어마다 처리할 명령어들을 얼마나 적절하게 분배하느냐가 핵심

## CPU 성능을 높이는 방법 : <u>스레드와 멀티 스레드</u>
- 소프트웨어적 스레드 : 하나의 프로그램에서 독립적으로 실행되는 단위
    - 코드를 각각의 스레드로 만들면 동시에 실행 가능
- **<u>하드웨어적 스레드</u>** : 하나의 코어가 동시에 처리하는 명령어 단위
    - 명령어의 단위
    - 멀티 스레드 프로세서, 멀티스레드 CPU : 하나의 코어로 여러 명령어를 동시에 처리하는 CPU
    - 하이퍼스레딩 : 인텔의 멀티스레드 기술

## 멀티 스레드 프로세서
- 하나의 코어로 여러 명령어를 동시에 처리하는 CPU
- 논리 프로세서 : CPU에서 사용되는 스레드 / 2코어 4스레드 -> 프로그램 입장 : 하나의 명령어를 처리하는 CPU 4개

### 정리!!
1. 코어 : CPU 내 명령어를 실행할 수 있는 '하드웨어 부품'
2. 스레드 : '명령어를 실행하는 단위'
3. 멀티코어 프로세서 : 코어가 2개 이상인 CPU
4. 멀티 스레드 프로세서 : 하나의 코어로 여러개의 명령어를 동시에 실행할 수 있는 CPU

# 명령어 병렬 처리 기법
- 명령어 병렬 처리 기법 : 명령어를 동시에 처리하여 CPU를 쉬지 않고 작동시키는 기법
1. 명령어 파이프 라이닝
2. 슈퍼 스칼라
3. 비순차적 명령어 처리

## 명령어 파이프 라인
- 명령어들을 명령어 파이프라인에 넣고 동시에 처리하는 기법
- 명령어 인출, 해석, 실행, 저장 등 같은 단계가 겹치지 않는다면 CPU는 각 단계를 동시에 실행할 수 있다.

### 파이프 라인의 위험
- 파이프라이닝이 높은 성능을 가져오긴 하지만, 특정 상황에선 성능 향상에 실패하여 파이프라인이 제대로 작동되지 않는 상황
1. 데이터 위험 : 명령어간 '데이터 의존성'에 의해 발생
2. 제어 위험 : 분기 등으로 인한 '프로그램 카운터의 갑작스러운 변화'
    - 명령어 파이프 라인에 미리 가지고 와서 처리 중 이었던 명령어들은 아무 쓸모가 없어짐
    - 분기 예측 : 이를 위해 사용하는 기술, 프로그램이 어디로 분기할 지 미리 예측하고 그 주소 인출
3. 구조적 위험(=자원위험) : 명령어들을 겹쳐 실행하는 과정에서 서로 다른 명령어가 동시에 ALU, 레지스터 등 과 같은 CPU 부품들을 사용하려 할 때 발생

## 슈퍼크칼라
- 여러 개의 명령어 파이프 라인을 포함한 구조
- 슈퍼 스칼라 구조로 명령어 처리가 가능한 CPU를 '슈퍼스칼라 프로세서' 또는 '슈퍼스칼라 CPU'라고 함
- 파이프라인 갯수에 비례하여 빨라지지는 않음

## 비순차적 명령어 처리
- 오늘날 CPU 성능 향상에 기여한 기법
- 합법적인 세치기
- 서로 데이터 의존성이 없는, 순서를 바꿔 실행해도 무방한 명령어 처리 기법

### CPU 언어 : ISA
- CPU의 언어이자 하드웨어가 소프트웨어를 어떻게 이해할지에 대한 약속
- 명령어 집합 구조, CPU가 이해할 수 있는 명령어들의 모음
- 명령어 집합에 '구조'가 붙는 이유는 CPU가 어떤 명령어를 이해하는 지에 따라 컴퓨터 구조의 설계 방식이 달라지기 떄문
- CPU가 이해하는 명령어들이 달라지면 명령어의 생김새 + 해석방식 + 레지스터 종류와 개수, 메모리 관리 방법 이 다 달라짐

## 명령어 병렬 처리 기법들을 도입하기 위한 ISA

### CISA : 복잡하고 다양한 명령어들을 활용하는 CPU 설계 방식1
- 가변 길이 명령어 집합을 활용
- (+) 적은 수의 명령어로도 프로그램을 동작 시키고 메모리를 절약할 수 있다
- (-) 명령어의 규격화가 어려워 파이프라이닝이 어려움
- (-) 명령어의 크기와 실행되기 까지의 시간이 일정하지 않음
- (-) 여러 클럭 주기를 필요로 함 
- (-) 파이프라인이 효율적으로 명령어를 처리할 수 없다.

### RISC : 복잡하고 다양한 명령어들을 활용하는 CPU 설계 방식1
- 고정길이 명령어를 활용
- (+) 메모리 접근을 단순화, 최소화하는 대신 레지스터 적극 활용
- (-) CISC 보다 많은 명령으로 프로그램을 작동

