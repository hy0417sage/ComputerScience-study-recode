# 메모리와 캐시 메모리
- 우리가 지금까지 배운 메모리가 RAM!

## RAM의 특징
1. 비휘발성 저장장치
2. RAM의 용량이 적다면 CPU가 보조기억장치에서 실행할 프로그램을 가져오는 일이 잦아 실행시간 길어짐
3. 하지만 RAM의 용량이 크다고 프로그램 실행 속도가 비례하여 빨라지진 않음 

## RAM의 종류
1. DRAM 
2. SRAM
3. SDRAM
4. DDR SDRAM

### DRAM (Dynamic RAM)
- 저장된 데이터가 동적으로 변하는 RAM
- 데이터의 소멸을 막기 위해 일정 주기로 데이터 재 활성화
- 대용량으로 설계하기 용이 : 소비전력 낮음, 저렴, 집적도 높음 

### SRAM (static RAM)
- 저장된 데이터가 변하지 않는 RAM (정적의)
- 대용량으로 만들어질 필요가 없지만 속도가 빨라야 하는 저장 장치(ex. 캐시메모리)에 사용됨 

### SDRAM (Synchronous Dynamic RAM)
- 클럭 신호와 동기화 된, 발전된 형태의 DRAM(동적인 RAM)
- 클럭 타이밍에 맞춰 CPU와 정보를 주고 받을 수 있음

### DDR SDRAM (Double Data Rate SDRAM) : 가장 흔히 사용되는 RAM
- 대역폭을 넓혀 속도를 빠르게 만든 SDRAM
- 대역폭 : '데이터를 주고받는 길의 넓이'

# 메모리의 주소 공간
- 물리 주소 : **메모리 HW**상의 주소
- 논리 주소 : **CPU**와 **실행중인 프로그램**이 사용하는 주소
    - 모두 0번지 부터 시작하는 자신만을 위한 주소인 논리주소를 가지고 있음
- 메모리에는 실행되는 프로그램이 시시때때로 적제되어 주소가 달라짐 (항상 동일한 물리주소에 저장하지 않음) 
- 메모리에 저장된 정보(물리주소)는 시시각각 변한다.

## 논리 주소 -> 물리 주소 
- CPU와 메모리가 상호 작용 하려면 논리 주소와 물리 주소간의 변환이 이루어야 한다.
- 메모리 관리 장치(MMU; Memory Management Unit)라는 하드웨어에서 이루어짐
- MMU는 CPU가 발생시킨 논리주소 + 베이스 레지스터 = 물리주소
    - 베이스 레지스터 : 프로그램의 첫 물리주소를 저장
    - 논리 주소 : 프로그램의 시작점으로 부터 떨어진 거리

## 메모리 보호기법 : 한계 레지스터
- 한계 레지스터 : 논리 주소의 최대 크기(범위)를 저장
    - 논리 주소 저장 범위 첫 시작 : 베이스 레지스터 값
    - 끝 : 베이스 레지스터 + 한계 레지스터
- 접근하고자 하는 논리주소가 한계 레지스터보다 작은지를 검사함으로 메모리 내의 프로그램을 보호할 수 있다.

# 캐시메모리
- CPU의 연산 속도와 메모리 접근 속도의 차이를 줄이기 위해 탄생
    - 빠른 저장 장치와 용량이 큰 저장 장치는 양립하기 어려움
    - 낮은 가격대 = 느린 속도 감수
    - 높은 가격대 = 적은 용량과 높은 가격대 감수
- CPU와 메모리 사이에 위치
    1. 레지스터보다 용량이 크고
    2. 메모리보다 빠른 SRAM 기반의 저장 장치

## 저장 장치의 계층 구조 : CPU에 얼마나 가까운가
1. 레지스터
2. 캐시메모리 L1 (코어 내부에 위치) (L1D = 데이터만 저장 / L1l = 명령어만 저장)
3. 캐시메모리 L2 (코어 내부에 위치)
4. 캐시메모리 L3 (코어 외부에 위치)
5. 메모리
6. 보조기억장치

## 캐시 메모리에는 무엇을 저장해야 할까요? : 참조지역성의 원리에 따라 저장
- 캐시 메모리는 한가지 원칙에 따라 메모리부터 가져올 데이터를 결정한다. (참조 지역성의 원리)
    - 캐시 히트 : 예측한(캐시메모리에 저장한) 데이터가 CPU에서 활용될 경우
    - 캐시 미스 : 예측이 틀려 메모리에서 필요한 데이터를 직접 가져와야 하는 경우
    - 캐시 적중률(cache hit ratio) : 캐시가 히트되는 비율, 적중률이 높으면 CPU 메모리의 접근 횟수를 줄일 수 있다.

## CPU가 접근 할때의 주된 경향
1. 시간 지역성 : 최근에 접근했던 메모리 공간에 다시 접근하려는 경향
    - 변수에 값을 저장하고 나면 언제든 저장한 값을 사용할 수 있음
    - 즉, 최근에 접근했던 메모리 공간을 여려번 다시 접근할 수 있음
2. 공간 지역성 : 접근한 메모리 공간 근처를 접근하려는 경향
    - 프로그램은 보통 관련 있는 데이터들을 모여서 저장하여 사용자가 입력할 기능이 모여있는 공간 근처를 집중적으로 접근 <br>
-> 이 두가지 원리에 입각해 CPU가 사용할 데이터를 예측